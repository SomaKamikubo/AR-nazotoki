<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>ルーム作成</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bulma@0.9.3/css/bulma.min.css">
    <link rel="stylesheet" href="style.css">
  </head>
  <body>
    <section class="hero bg-img is-medium">
      <div class="hero-body"></div>
    </section>
    <div class="container mt-4">
      <h2>部屋を立てるか、もう一人が立てた部屋のURLにアクセスしてください。</h2>
      <div class="block has-text-centered mt-4">
        <a href="#" class="button is-medium is-primary is-outlined" id="makeRoomButton">部屋をたてる</a>
      </div>
      <div class="block has-text-centered">
        <a href="#" class="button is-medium is-outlined" onclick="location.href='index.html'">タイトルに戻る</a>
        <a href="#" class="button is-medium is-link is-outlined" onclick="location.href='dl-worksheet.html'">印刷用ページへ</a>
      </div>
    </div>
  </body>
  <script>
    function generateUuid(){
      // https://github.com/GoogleChrome/chrome-platform-analytics/blob/master/src/internal/identifier.js
      // const FORMAT: string = "xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx";
      let chars = "xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".split("");
      for (let i = 0, len = chars.length; i < len; i++) {
        switch (chars[i]) {
          case "x":
            chars[i] = Math.floor(Math.random() * 16).toString(16);
            break;
          case "y":
            chars[i] = (Math.floor(Math.random() * 4) + 8).toString(16);
            break;
        }
      }
      return chars.join("");
    }

    document.getElementById('makeRoomButton').onclick = () => {
      location.href = `ready.html?id=${generateUuid()}`;
    };
  </script>
</html>